export const GEO_URL = "https://cdn.jsdelivr.net/npm/world-atlas@2/countries-50m.json";

// Country name mapping from TopoJSON names to our constants names
export const COUNTRY_NAME_MAPPING: Record<string, string> = {
  // Americas - Common TopoJSON variations
  "United States": "United States of America",
  "USA": "United States of America",
  "US": "United States of America", 
  "United States of America": "United States of America",
  "Bolivia (Plurinational State of)": "Bolivia",
  "Venezuela (Bolivarian Republic of)": "Venezuela",
  "Venezuela, RB": "Venezuela",
  "Dominican Republic": "Dominican Rep.",
  "Br.": "Brazil",
  
  // Europe - Common variations
  "United Kingdom": "United Kingdom",
  "UK": "United Kingdom",
  "Great Britain": "United Kingdom",
  "Bosnia and Herzegovina": "Bosnia and Herz.",
  "Czech Republic": "Czechia",
  "Czechia": "Czechia",
  "North Macedonia": "Macedonia",
  "Macedonia": "Macedonia",
  "The former Yugoslav Republic of Macedonia": "Macedonia",
  "Russian Federation": "Russia",
  "Russia": "Russia",
  
  // Asia - Common variations
  "Korea": "South Korea",
  "South Korea": "South Korea", 
  "Republic of Korea": "South Korea",
  "Korea, Rep.": "South Korea",
  "Korea, South": "South Korea",
  "North Korea": "North Korea",
  "Korea, North": "North Korea",
  "Korea, Dem. People's Rep.": "North Korea",
  "Dem. People's Rep. Korea": "North Korea",
  "Iran (Islamic Republic of)": "Iran",
  "Iran, Islamic Rep.": "Iran",
  "Islamic Republic of Iran": "Iran",
  "Iran": "Iran",
  "People's Republic of China": "China",
  "China": "China",
  "Republic of China": "Taiwan",
  "Taiwan": "Taiwan",
  "Chinese Taipei": "Taiwan",
  "Lao People's Democratic Republic": "Laos",
  "Lao PDR": "Laos",
  "Laos": "Laos",
  "Viet Nam": "Vietnam",
  "Vietnam": "Vietnam",
  
  // Africa - Common variations
  "Democratic Republic of the Congo": "Dem. Rep. Congo",
  "Congo, Dem. Rep.": "Dem. Rep. Congo",
  "Congo (Democratic Republic of the)": "Dem. Rep. Congo",
  "DRC": "Dem. Rep. Congo",
  "Congo": "Congo",
  "Republic of the Congo": "Congo",
  "Congo, Rep.": "Congo",
  "Congo (Republic of the)": "Congo",
  "Central African Republic": "Central African Rep.",
  "CAR": "Central African Rep.",
  "CÃ´te d'Ivoire": "Ivory Coast",
  "Cote d'Ivoire": "Ivory Coast",
  "Ivory Coast": "Ivory Coast",
  "United Republic of Tanzania": "Tanzania",
  "Tanzania": "Tanzania",
  "South Sudan": "S. Sudan",
  "Western Sahara": "W. Sahara",
  "Swaziland": "Eswatini",
  "eSwatini": "Eswatini",
  "Kingdom of eSwatini": "Eswatini",
  "Equatorial Guinea": "Eq. Guinea",
  
  // Middle East variations
  "Syrian Arab Republic": "Syria",
  "Syria": "Syria",
  "Yemen Arab Republic": "Yemen",
  "Yemen": "Yemen",
  "Yemen, Rep.": "Yemen",
  
  // Other variations
  "Republic of Serbia": "Serbia",
  "Serbia": "Serbia",
  "Republic of Montenegro": "Montenegro",
  "Montenegro": "Montenegro", 
  "East Timor": "Timor-Leste",
  "Timor Leste": "Timor-Leste",
  "Timor-Leste": "Timor-Leste",
  
  // Direct matches - Add ALL countries from our COUNTRY_POPULATIONS to ensure they map
  "Afghanistan": "Afghanistan",
  "Angola": "Angola", 
  "Albania": "Albania",
  "United Arab Emirates": "United Arab Emirates",
  "Argentina": "Argentina",
  "Armenia": "Armenia",
  "Australia": "Australia",
  "Austria": "Austria",
  "Azerbaijan": "Azerbaijan",
  "Burundi": "Burundi",
  "Belgium": "Belgium",
  "Benin": "Benin",
  "Burkina Faso": "Burkina Faso",
  "Bangladesh": "Bangladesh",
  "Bulgaria": "Bulgaria",
  "Belarus": "Belarus",
  "Belize": "Belize",
  "Bolivia": "Bolivia",
  "Brazil": "Brazil",
  "Brunei": "Brunei",
  "Bhutan": "Bhutan",
  "Botswana": "Botswana",
  "Canada": "Canada",
  "Switzerland": "Switzerland",
  "Chile": "Chile",
  "Cameroon": "Cameroon",
  "Colombia": "Colombia",
  "Costa Rica": "Costa Rica",
  "Cuba": "Cuba",
  "Germany": "Germany",
  "Djibouti": "Djibouti",
  "Denmark": "Denmark",
  "Algeria": "Algeria",
  "Ecuador": "Ecuador",
  "Egypt": "Egypt",
  "Eritrea": "Eritrea",
  "Spain": "Spain",
  "Estonia": "Estonia",
  "Ethiopia": "Ethiopia",
  "Finland": "Finland",
  "Fiji": "Fiji",
  "France": "France",
  "Gabon": "Gabon",
  "Georgia": "Georgia",
  "Ghana": "Ghana",
  "Guinea": "Guinea",
  "Gambia": "Gambia",
  "Guinea-Bissau": "Guinea-Bissau",
  "Greece": "Greece",
  "Guatemala": "Guatemala",
  "Guyana": "Guyana",
  "Honduras": "Honduras",
  "Croatia": "Croatia",
  "Haiti": "Haiti",
  "Hungary": "Hungary",
  "Indonesia": "Indonesia",
  "India": "India",
  "Ireland": "Ireland",
  "Iraq": "Iraq",
  "Iceland": "Iceland",
  "Israel": "Israel",
  "Italy": "Italy",
  "Jamaica": "Jamaica",
  "Jordan": "Jordan",
  "Japan": "Japan",
  "Kazakhstan": "Kazakhstan",
  "Kenya": "Kenya",
  "Kyrgyzstan": "Kyrgyzstan",
  "Cambodia": "Cambodia",
  "Kuwait": "Kuwait",
  "Lebanon": "Lebanon",
  "Liberia": "Liberia",
  "Libya": "Libya",
  "Sri Lanka": "Sri Lanka",
  "Lesotho": "Lesotho",
  "Lithuania": "Lithuania",
  "Luxembourg": "Luxembourg",
  "Latvia": "Latvia",
  "Morocco": "Morocco",
  "Moldova": "Moldova",
  "Madagascar": "Madagascar",
  "Mexico": "Mexico",
  "Mali": "Mali",
  "Myanmar": "Myanmar",
  "Mongolia": "Mongolia",
  "Mozambique": "Mozambique",
  "Mauritania": "Mauritania",
  "Malawi": "Malawi",
  "Malaysia": "Malaysia",
  "Namibia": "Namibia",
  "Niger": "Niger",
  "Nigeria": "Nigeria",
  "Nicaragua": "Nicaragua",
  "Netherlands": "Netherlands",
  "Norway": "Norway",
  "Nepal": "Nepal",
  "New Zealand": "New Zealand",
  "Oman": "Oman",
  "Pakistan": "Pakistan",
  "Panama": "Panama",
  "Peru": "Peru",
  "Philippines": "Philippines",
  "Papua New Guinea": "Papua New Guinea",
  "Poland": "Poland",
  "Portugal": "Portugal",
  "Paraguay": "Paraguay",
  "Qatar": "Qatar",
  "Romania": "Romania",
  "Rwanda": "Rwanda",
  "Saudi Arabia": "Saudi Arabia",
  "Sudan": "Sudan",
  "Senegal": "Senegal",
  "Sierra Leone": "Sierra Leone",
  "El Salvador": "El Salvador",
  "Somaliland": "Somaliland",
  "Somalia": "Somalia",
  "Suriname": "Suriname",
  "Slovakia": "Slovakia",
  "Slovenia": "Slovenia",
  "Sweden": "Sweden",
  "Chad": "Chad",
  "Togo": "Togo",
  "Thailand": "Thailand",
  "Tajikistan": "Tajikistan",
  "Turkmenistan": "Turkmenistan",
  "Trinidad and Tobago": "Trinidad and Tobago",
  "Tunisia": "Tunisia",
  "Turkey": "Turkey",
  "Uganda": "Uganda",
  "Ukraine": "Ukraine",
  "Uruguay": "Uruguay",
  "Uzbekistan": "Uzbekistan",
  "South Africa": "South Africa",
  "Zambia": "Zambia",
  "Zimbabwe": "Zimbabwe",
  "Eq. Guinea": "Eq. Guinea",
};

// Function to normalize country names
export function normalizeCountryName(geoName: string): string {
  // First try direct mapping
  if (COUNTRY_NAME_MAPPING[geoName]) {
    return COUNTRY_NAME_MAPPING[geoName];
  }

  // If no mapping found, return the original name
  // This will work for countries that already match exactly
  return geoName;
}

// Approximate populations for initial color grading.
// The accurate, up-to-date population is fetched from Gemini on hover.
export const COUNTRY_POPULATIONS: Record<string, number> = {
  "Afghanistan": 41129000,
  "Angola": 36685000,
  "Albania": 2829000,
  "United Arab Emirates": 9516000,
  "Argentina": 46233000,
  "Armenia": 2777000,
  "Australia": 26640000,
  "Austria": 9158000,
  "Azerbaijan": 10412000,
  "Burundi": 13239000,
  "Belgium": 11697000,
  "Benin": 13754000,
  "Burkina Faso": 23252000,
  "Bangladesh": 172954000, // 8th most populous
  "Bulgaria": 6687000,
  "Bosnia and Herz.": 3210000,
  "Belarus": 9056000,
  "Belize": 441000,
  "Bolivia": 12388000,
  "Brazil": 216422000, // 5th most populous
  "Brunei": 460000,
  "Bhutan": 787000,
  "Botswana": 2675000,
  "Central African Rep.": 5742000,
  "Canada": 39566000,
  "Switzerland": 8921000,
  "Chile": 19629000,
  "China": 1425672000, // 2nd most populous (overtaken by India)
  "Ivory Coast": 28874000,
  "Cameroon": 28648000,
  "Dem. Rep. Congo": 105044000,
  "Congo": 6106000,
  "Colombia": 52886000,
  "Costa Rica": 5281000,
  "Cuba": 11113000,
  "Czechia": 10827000,
  "Germany": 84482000,
  "Djibouti": 1136000,
  "Denmark": 5973000,
  "Dominican Rep.": 11332000,
  "Algeria": 46814000,
  "Ecuador": 18191000,
  "Egypt": 112717000,
  "Eritrea": 3748000,
  "Spain": 48373000,
  "Estonia": 1396000,
  "Ethiopia": 126527000,
  "Finland": 5563000,
  "Fiji": 929000,
  "France": 68373000,
  "Gabon": 2397000,
  "United Kingdom": 67889000,
  "Georgia": 3728000,
  "Ghana": 34428000,
  "Guinea": 14190000,
  "Gambia": 2736000,
  "Guinea-Bissau": 2151000,
  "Eq. Guinea": 1679000,
  "Greece": 10413000,
  "Guatemala": 18584000,
  "Guyana": 813000,
  "Honduras": 10593000,
  "Croatia": 3855000,
  "Haiti": 11724000,
  "Hungary": 9689000,
  "Indonesia": 277749000, // 4th most populous
  "India": 1428627000, // 1st most populous (overtook China in 2023)
  "Ireland": 5255000,
  "Iran": 86758000,
  "Iraq": 44496000,
  "Iceland": 384000,
  "Israel": 9842000,
  "Italy": 58870000,
  "Jamaica": 2825000,
  "Jordan": 11285000,
  "Japan": 123294000,
  "Kazakhstan": 20593000,
  "Kenya": 55100000,
  "Kyrgyzstan": 7000000,
  "Cambodia": 16944000,
  "South Korea": 51713000,
  "Kuwait": 4310000,
  "Laos": 7633000,
  "Lebanon": 5490000,
  "Liberia": 5418000,
  "Libya": 6888000,
  "Sri Lanka": 22181000,
  "Lesotho": 2306000,
  "Lithuania": 2718000,
  "Luxembourg": 660000,
  "Latvia": 1830000,
  "Morocco": 37840000,
  "Moldova": 2512000,
  "Madagascar": 30325000,
  "Mexico": 131562000,
  "Macedonia": 2073000,
  "Mali": 23293000,
  "Myanmar": 55770000,
  "Montenegro": 626000,
  "Mongolia": 3447000,
  "Mozambique": 33897000,
  "Mauritania": 5180000,
  "Malawi": 20931000,
  "Malaysia": 34308000,
  "Namibia": 2604000,
  "Niger": 27202000,
  "Nigeria": 223804000, // 6th most populous
  "Nicaragua": 7046000,
  "Netherlands": 17590000,
  "Norway": 5474000,
  "Nepal": 30896000,
  "New Zealand": 5228000,
  "Oman": 4644000,
  "Pakistan": 240486000, // 5th most populous
  "Panama": 4468000,
  "Peru": 33716000,
  "Philippines": 117337000, // 12th most populous
  "Papua New Guinea": 10329000,
  "Poland": 36821000,
  "Portugal": 10467000,
  "Paraguay": 6861000,
  "Qatar": 2979000,
  "Romania": 19015000,
  "Russia": 144444000, // 9th most populous
  "Rwanda": 14256000,
  "W. Sahara": 652000,
  "Saudi Arabia": 36947000,
  "Sudan": 48109000,
  "S. Sudan": 10913000,
  "Senegal": 18385000,
  "Sierra Leone": 8791000,
  "El Salvador": 6364000,
  "Somaliland": 4500000,
  "Somalia": 18143000,
  "Serbia": 6834000,
  "Suriname": 618000,
  "Slovakia": 5795000,
  "Slovenia": 2119000,
  "Sweden": 10612000,
  "Eswatini": 1210000,
  "Syria": 23227000,
  "Chad": 18279000,
  "Togo": 8848000,
  "Thailand": 71668000,
  "Tajikistan": 10143000,
  "Turkmenistan": 6117000,
  "Timor-Leste": 1341000,
  "Trinidad and Tobago": 1534000,
  "Tunisia": 12458000,
  "Turkey": 85816000, // 17th most populous
  "Tanzania": 65498000,
  "Uganda": 48582000,
  "Ukraine": 37000000, // Reduced due to conflict and migration
  "Uruguay": 3423000,
  "United States of America": 341814000, // 3rd most populous
  "Uzbekistan": 36413000,
  "Venezuela": 28838000,
  "Vietnam": 98858000, // 15th most populous
  "Yemen": 34449000,
  "South Africa": 60756000,
  "Zambia": 20017000,
  "Zimbabwe": 16767000
};
